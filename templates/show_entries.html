{% extends "layout.html" %}
{% block body %}
  <form action="{{ url_for('add_entry') }}" method="post" class="mb-4">
    <div class="mb-3">
        <label for="title" class="form-label">Title:</label>
        <input type="text" class="form-control" id="title" name="title" required>
    </div>
    <div class="mb-3">
        <label for="text" class="form-label">Text:</label>
        <textarea class="form-control" id="text" name="text" rows="5" cols="40" required></textarea>
    </div>
    <div class="mb-3">
        <label for="category" class="form-label">Category:</label>
        <input type="text" class="form-control" id="category" name="category" required>
    </div>
      <button type="submit" class="btn btn-primary">Share Post</button>
  </form>

  <form method="get" action="{{ url_for('show_entries') }}" class="mb-4">
    <label for="category" class="form-label">Filter by category:</label>
    <select class="form-select" id="category" name="category" onchange="this.form.submit()">
      <option value="">All Categories</option>
      {% for cat in categories %}
        <option value="{{ cat }}" {% if selected_category == cat %}selected{% endif %}>{{ cat }}</option>
      {% endfor %}
    </select>
  </form>

  <ul class="entries_list">
  {% for entry in entries %}

    <li class="card md-3">
        <div class="card-body">
            <div class="align-center">

                <div class="col-md-4">
                    <h2>{{ entry.title }}</h2>
                </div>

                <div class="col-md-5">
                    <span class="badge bg-secondary">{{ entry.category }}</span>
                </div>

                <div class="col-md-5">
                    <form method="get" action="{{ url_for('edit_entry', id=entry.id) }}" class="d-inline">
                      <button type="submit" class="btn btn-sm btn-outline-primary me-2">Edit</button>
                    </form>
                    <form method="post" action="{{ url_for('delete_entry', id=entry.id) }}" class="d-inline">
                      <button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
                    </form>
                </div>
            </div>

            <div class="container px-4">
                <p class="card-text">{{ entry.text|safe }}</p>
            </div>

        </div>
    </li>

  {% else %}
    <li><em>Unbelievable.  No entries here so far</em></li>
  {% endfor %}

  </ul>
{% endblock %}


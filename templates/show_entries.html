{% extends "layout.html" %}
{% block body %}
  <form action="{{ url_for('add_entry') }}" method="post" class="add-entry">
    <dl>
      <dt>Title:
      <dd><input type="text" size="30" name="title">
      <dt>Text:
      <dd><textarea name="text" rows="5" cols="40"></textarea>
      <dt> Category:
      <dd><textarea  type = "text" size="30" name="category"></textarea>
      <dd><input type="submit" value="Share">
    </dl>
  </form>


  <form method="get" action="{{ url_for('show_entries') }}">
  <label for="category">Filter by category:</label>
  <select name="category" onchange="this.form.submit()">
    <option value="">All Categories</option>
    {% for cat in categories %}
      <option value="{{ cat }}" {% if selected_category == cat %}selected{% endif %}>{{ cat }}</option>
    {% endfor %}
  </select>
</form>



  <ul class="entries">
  {% for entry in entries %}

    <li><h2>{{ entry.title }}</h2>
        <p><strong>Category:</strong> {{ entry.category }}</p>
        {{ entry.text|safe }}

    <form method="post" action="{{ url_for('delete_entry', id=entry.id) }}">
       <input type="submit" value="Delete">
    </form>

    <form method="post" action="{{ url_for('edit_entry', id=entry.id) }}">
       <input type="submit" value="Edit Post">
    </form>

    </li>

  {% else %}
    <li><em>Unbelievable.  No entries here so far</em></li>
  {% endfor %}
  </ul>
{% endblock %}
